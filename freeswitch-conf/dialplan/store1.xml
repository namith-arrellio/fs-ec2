<!--
    STORE1 CONTEXT - Internal calls for store1.local domain
    
    Handles:
    - Park slots (700-709) with BLF presence
    - All other calls routed to ESL (call_router.py)
-->
<include>
  <context name="store1">

    <!-- Park slot handling with presence/BLF support -->
    <extension name="park_slot">
      <condition field="destination_number" expression="^(70[0-9])$">
        <action application="set" data="fifo_music=local_stream://moh"/>
        <action application="set" data="presence_id=$1@store1.local"/>
        <action application="valet_park" data="store1.local $1"/>
      </condition>
    </extension>

    <!-- Route all other calls to ESL for handling -->
    <extension name="esl_routing">
      <condition field="destination_number" expression="^(.*)$">
        <action application="socket" data="127.0.0.1:5002 async full"/>
      </condition>
    </extension>

  </context>
</include>

