<include>
  <context name="store2">
    <!-- Internal extension dialing - route through Kamailio -->
    <extension name="local_extension">
      <condition field="destination_number" expression="^(10[01][0-9])$">
        <action application="set" data="sip_invite_domain=store2.local"/>
        <action application="bridge" data="sofia/internal/$1@127.0.0.1:5060"/>
      </condition>
    </extension>

    <!-- Park slots 700-709 using valet_park with BLF -->
    <extension name="park_slot">
      <condition field="destination_number" expression="^(70[0-9])$">
        <action application="answer"/>
        <action application="set" data="presence_id=$1@store2.local"/>
        <action application="valet_park" data="store2.local $1"/>
      </condition>
    </extension>

    <!-- Outbound calls via Store 2's Telnyx trunk -->
    <extension name="outbound">
      <condition field="destination_number" expression="^(\+?1?\d{10})$">
        <action application="set" data="effective_caller_id_number=+17372449688"/>
        <action application="bridge" data="sofia/gateway/telnyx_store2/+1$1"/>
      </condition>
    </extension>
  </context>
</include>